random_id.dns-name: Refreshing state... [id=yAN1tg]
random_id.kvname: Refreshing state... [id=tCKz6n0]
random_password.vmpassword: Refreshing state... [id=none]
random_string.random: Refreshing state... [id=rY4]
data.azurerm_client_config.current: Reading...
azurerm_resource_group.uks: Refreshing state... [id=/subscriptions/ec08f54a-0f1a-4c39-a964-cc5f288924e4/resourceGroups/rg-uksouth-chaos-demo-01]
data.azurerm_client_config.current: Read complete after 0s [id=Y2xpZW50Q29uZmlncy9jbGllbnRJZD0wNGIwNzc5NS04ZGRiLTQ2MWEtYmJlZS0wMmY5ZTFiZjdiNDY7b2JqZWN0SWQ9OTlkNmExNjEtNDIyOC00MmMyLTgxMzYtMGY3NTllMDU2ZDFmO3N1YnNjcmlwdGlvbklkPWVjMDhmNTRhLTBmMWEtNGMzOS1hOTY0LWNjNWYyODg5MjRlNDt0ZW5hbnRJZD02OGEzYmU0OC1jNTVlLTQxNGMtYjJiZi01Y2M0ZDJkODFkNzQ=]
azurerm_service_plan.uks-asp: Refreshing state... [id=/subscriptions/ec08f54a-0f1a-4c39-a964-cc5f288924e4/resourceGroups/rg-uksouth-chaos-demo-01/providers/Microsoft.Web/serverFarms/uksouth-asp-01]
azurerm_public_ip.uks-fwpip: Refreshing state... [id=/subscriptions/ec08f54a-0f1a-4c39-a964-cc5f288924e4/resourceGroups/rg-uksouth-chaos-demo-01/providers/Microsoft.Network/publicIPAddresses/pip-fw-uksouth-01]
azurerm_availability_set.uks-asa: Refreshing state... [id=/subscriptions/ec08f54a-0f1a-4c39-a964-cc5f288924e4/resourceGroups/rg-uksouth-chaos-demo-01/providers/Microsoft.Compute/availabilitySets/as-uksouth-a]
azurerm_network_security_group.uks-nsg1: Refreshing state... [id=/subscriptions/ec08f54a-0f1a-4c39-a964-cc5f288924e4/resourceGroups/rg-uksouth-chaos-demo-01/providers/Microsoft.Network/networkSecurityGroups/nsg-snet-uksouth-vnet-hub-01]
azurerm_public_ip.uks-fwmanpip: Refreshing state... [id=/subscriptions/ec08f54a-0f1a-4c39-a964-cc5f288924e4/resourceGroups/rg-uksouth-chaos-demo-01/providers/Microsoft.Network/publicIPAddresses/pip-fwman-uksouth-01]
azurerm_availability_set.uks-asb: Refreshing state... [id=/subscriptions/ec08f54a-0f1a-4c39-a964-cc5f288924e4/resourceGroups/rg-uksouth-chaos-demo-01/providers/Microsoft.Compute/availabilitySets/as-uksouth-b]
azurerm_virtual_network.uks-hub1: Refreshing state... [id=/subscriptions/ec08f54a-0f1a-4c39-a964-cc5f288924e4/resourceGroups/rg-uksouth-chaos-demo-01/providers/Microsoft.Network/virtualNetworks/vnet-uksouth-hub-01]
azurerm_traffic_manager_profile.tm1: Refreshing state... [id=/subscriptions/ec08f54a-0f1a-4c39-a964-cc5f288924e4/resourceGroups/rg-uksouth-chaos-demo-01/providers/Microsoft.Network/trafficManagerProfiles/tm-chaos-demo]
azurerm_storage_account.uks-vm1: Refreshing state... [id=/subscriptions/ec08f54a-0f1a-4c39-a964-cc5f288924e4/resourceGroups/rg-uksouth-chaos-demo-01/providers/Microsoft.Storage/storageAccounts/sauksouthvmdiag]
azurerm_storage_account.uks-sa1: Refreshing state... [id=/subscriptions/ec08f54a-0f1a-4c39-a964-cc5f288924e4/resourceGroups/rg-uksouth-chaos-demo-01/providers/Microsoft.Storage/storageAccounts/sauksouth01]
azurerm_user_assigned_identity.uai-uks: Refreshing state... [id=/subscriptions/ec08f54a-0f1a-4c39-a964-cc5f288924e4/resourceGroups/rg-uksouth-chaos-demo-01/providers/Microsoft.ManagedIdentity/userAssignedIdentities/UAI-uksouth]
azurerm_app_configuration.uks-config: Refreshing state... [id=/subscriptions/ec08f54a-0f1a-4c39-a964-cc5f288924e4/resourceGroups/rg-uksouth-chaos-demo-01/providers/Microsoft.AppConfiguration/configurationStores/appcfg-uksouth-01]
azurerm_subnet.uks-hub1-subnetfwman: Refreshing state... [id=/subscriptions/ec08f54a-0f1a-4c39-a964-cc5f288924e4/resourceGroups/rg-uksouth-chaos-demo-01/providers/Microsoft.Network/virtualNetworks/vnet-uksouth-hub-01/subnets/AzureFirewallManagementSubnet]
azurerm_subnet.uks-hub1-subnetfw: Refreshing state... [id=/subscriptions/ec08f54a-0f1a-4c39-a964-cc5f288924e4/resourceGroups/rg-uksouth-chaos-demo-01/providers/Microsoft.Network/virtualNetworks/vnet-uksouth-hub-01/subnets/AzureFirewallSubnet]
azurerm_subnet.uks-hub1-subnetlb: Refreshing state... [id=/subscriptions/ec08f54a-0f1a-4c39-a964-cc5f288924e4/resourceGroups/rg-uksouth-chaos-demo-01/providers/Microsoft.Network/virtualNetworks/vnet-uksouth-hub-01/subnets/snetlb-uksouth-vnet-hub-01]
azurerm_subnet.uks-hub1-subnet: Refreshing state... [id=/subscriptions/ec08f54a-0f1a-4c39-a964-cc5f288924e4/resourceGroups/rg-uksouth-chaos-demo-01/providers/Microsoft.Network/virtualNetworks/vnet-uksouth-hub-01/subnets/snethost-uksouth-vnet-hub-01]
azurerm_role_assignment.vm_operator: Refreshing state... [id=/subscriptions/ec08f54a-0f1a-4c39-a964-cc5f288924e4/resourceGroups/rg-uksouth-chaos-demo-01/providers/Microsoft.Authorization/roleAssignments/3524463a-0235-d6a8-78e5-143af5bade35]
azurerm_lb.uks-lb: Refreshing state... [id=/subscriptions/ec08f54a-0f1a-4c39-a964-cc5f288924e4/resourceGroups/rg-uksouth-chaos-demo-01/providers/Microsoft.Network/loadBalancers/lb-int-uksouth]
azurerm_subnet_network_security_group_association.uks-hub: Refreshing state... [id=/subscriptions/ec08f54a-0f1a-4c39-a964-cc5f288924e4/resourceGroups/rg-uksouth-chaos-demo-01/providers/Microsoft.Network/virtualNetworks/vnet-uksouth-hub-01/subnets/snethost-uksouth-vnet-hub-01]
azurerm_network_interface.uks-anics[0]: Refreshing state... [id=/subscriptions/ec08f54a-0f1a-4c39-a964-cc5f288924e4/resourceGroups/rg-uksouth-chaos-demo-01/providers/Microsoft.Network/networkInterfaces/nic-uksouth-a-0]
azurerm_network_interface.uks-bnics[0]: Refreshing state... [id=/subscriptions/ec08f54a-0f1a-4c39-a964-cc5f288924e4/resourceGroups/rg-uksouth-chaos-demo-01/providers/Microsoft.Network/networkInterfaces/nic-uksouth-b-0]
azurerm_firewall.uks-fw1: Refreshing state... [id=/subscriptions/ec08f54a-0f1a-4c39-a964-cc5f288924e4/resourceGroups/rg-uksouth-chaos-demo-01/providers/Microsoft.Network/azureFirewalls/fw-uksouth-01]
azurerm_lb_probe.uks-probe: Refreshing state... [id=/subscriptions/ec08f54a-0f1a-4c39-a964-cc5f288924e4/resourceGroups/rg-uksouth-chaos-demo-01/providers/Microsoft.Network/loadBalancers/lb-int-uksouth/probes/http-probe]
azurerm_lb_backend_address_pool.uks-pool: Refreshing state... [id=/subscriptions/ec08f54a-0f1a-4c39-a964-cc5f288924e4/resourceGroups/rg-uksouth-chaos-demo-01/providers/Microsoft.Network/loadBalancers/lb-int-uksouth/backendAddressPools/BackEndAddressPool]
azurerm_role_assignment.appconf_dataowner: Refreshing state... [id=/subscriptions/ec08f54a-0f1a-4c39-a964-cc5f288924e4/resourceGroups/rg-uksouth-chaos-demo-01/providers/Microsoft.AppConfiguration/configurationStores/appcfg-uksouth-01/providers/Microsoft.Authorization/roleAssignments/a7e553a0-c2a5-b9d2-050f-4f2757f16f3f]
azurerm_network_interface_backend_address_pool_association.uks-a[0]: Refreshing state... [id=/subscriptions/ec08f54a-0f1a-4c39-a964-cc5f288924e4/resourceGroups/rg-uksouth-chaos-demo-01/providers/Microsoft.Network/networkInterfaces/nic-uksouth-a-0/ipConfigurations/uksouth-nic-a-0-ipconfig|/subscriptions/ec08f54a-0f1a-4c39-a964-cc5f288924e4/resourceGroups/rg-uksouth-chaos-demo-01/providers/Microsoft.Network/loadBalancers/lb-int-uksouth/backendAddressPools/BackEndAddressPool]
azurerm_network_interface_backend_address_pool_association.uks-b[0]: Refreshing state... [id=/subscriptions/ec08f54a-0f1a-4c39-a964-cc5f288924e4/resourceGroups/rg-uksouth-chaos-demo-01/providers/Microsoft.Network/networkInterfaces/nic-uksouth-b-0/ipConfigurations/uksouth-nic-b-0-ipconfig|/subscriptions/ec08f54a-0f1a-4c39-a964-cc5f288924e4/resourceGroups/rg-uksouth-chaos-demo-01/providers/Microsoft.Network/loadBalancers/lb-int-uksouth/backendAddressPools/BackEndAddressPool]
azurerm_route_table.uks-rt1: Refreshing state... [id=/subscriptions/ec08f54a-0f1a-4c39-a964-cc5f288924e4/resourceGroups/rg-uksouth-chaos-demo-01/providers/Microsoft.Network/routeTables/rtbl-uksouth-01]
azurerm_firewall_network_rule_collection.uks-outbound: Refreshing state... [id=/subscriptions/ec08f54a-0f1a-4c39-a964-cc5f288924e4/resourceGroups/rg-uksouth-chaos-demo-01/providers/Microsoft.Network/azureFirewalls/fw-uksouth-01/networkRuleCollections/uksouth-outbound]
azurerm_firewall_nat_rule_collection.uks-nat: Refreshing state... [id=/subscriptions/ec08f54a-0f1a-4c39-a964-cc5f288924e4/resourceGroups/rg-uksouth-chaos-demo-01/providers/Microsoft.Network/azureFirewalls/fw-uksouth-01/natRuleCollections/uksouth-nat1]
azurerm_lb_rule.uks-rule: Refreshing state... [id=/subscriptions/ec08f54a-0f1a-4c39-a964-cc5f288924e4/resourceGroups/rg-uksouth-chaos-demo-01/providers/Microsoft.Network/loadBalancers/lb-int-uksouth/loadBalancingRules/LBRule]
azurerm_subnet_route_table_association.uks: Refreshing state... [id=/subscriptions/ec08f54a-0f1a-4c39-a964-cc5f288924e4/resourceGroups/rg-uksouth-chaos-demo-01/providers/Microsoft.Network/virtualNetworks/vnet-uksouth-hub-01/subnets/snethost-uksouth-vnet-hub-01]
azurerm_app_configuration_key.ck1: Refreshing state... [id=https://appcfg-uksouth-01.azconfig.io/kv/key1?label=appsecret1]
azurerm_app_configuration_key.ck2: Refreshing state... [id=https://appcfg-uksouth-01.azconfig.io/kv/key2?label=appsecret2]
azurerm_traffic_manager_azure_endpoint.uks-tme1: Refreshing state... [id=/subscriptions/ec08f54a-0f1a-4c39-a964-cc5f288924e4/resourceGroups/rg-uksouth-chaos-demo-01/providers/Microsoft.Network/trafficManagerProfiles/tm-chaos-demo/AzureEndpoints/uksouth-endpoint]
azurerm_role_assignment.storage_blob_data_reader2: Refreshing state... [id=/subscriptions/ec08f54a-0f1a-4c39-a964-cc5f288924e4/resourceGroups/rg-uksouth-chaos-demo-01/providers/Microsoft.Storage/storageAccounts/sauksouthvmdiag/providers/Microsoft.Authorization/roleAssignments/7347e9be-090d-5a9e-9bea-1fda68ed4bcf]
azurerm_role_assignment.storage_blob_data_reader1: Refreshing state... [id=/subscriptions/ec08f54a-0f1a-4c39-a964-cc5f288924e4/resourceGroups/rg-uksouth-chaos-demo-01/providers/Microsoft.Storage/storageAccounts/sauksouth01/providers/Microsoft.Authorization/roleAssignments/badaaa9e-bbbf-b931-072a-101defe32332]
azurerm_linux_function_app.uks-fa: Refreshing state... [id=/subscriptions/ec08f54a-0f1a-4c39-a964-cc5f288924e4/resourceGroups/rg-uksouth-chaos-demo-01/providers/Microsoft.Web/sites/sa-uksouth-fa01]
data.azurerm_linux_function_app.uks-fa: Reading...
data.azurerm_linux_function_app.uks-fa: Still reading... [10s elapsed]
data.azurerm_linux_function_app.uks-fa: Read complete after 14s [id=/subscriptions/ec08f54a-0f1a-4c39-a964-cc5f288924e4/resourceGroups/rg-uksouth-chaos-demo-01/providers/Microsoft.Web/sites/sa-uksouth-fa01]
azurerm_key_vault.kv1: Refreshing state... [id=/subscriptions/ec08f54a-0f1a-4c39-a964-cc5f288924e4/resourceGroups/rg-uksouth-chaos-demo-01/providers/Microsoft.KeyVault/vaults/keyvaultb422b3ea7d]
azurerm_key_vault_secret.vmpassword1: Refreshing state... [id=https://keyvaultb422b3ea7d.vault.azure.net/secrets/vmpassword1/51c714eb3c0b4ce39e6f69451a4f9077]
azurerm_key_vault_secret.vmpassword2: Refreshing state... [id=https://keyvaultb422b3ea7d.vault.azure.net/secrets/vmpassword2/a2d68b023f5744df8e0811d3fedfc24d]
azurerm_role_assignment.key_vault: Refreshing state... [id=/subscriptions/ec08f54a-0f1a-4c39-a964-cc5f288924e4/resourceGroups/rg-uksouth-chaos-demo-01/providers/Microsoft.KeyVault/vaults/keyvaultb422b3ea7d/providers/Microsoft.Authorization/roleAssignments/74414617-af2e-b093-5f41-2a4fa866eb09]
azurerm_windows_virtual_machine.uks-vmsb[0]: Refreshing state... [id=/subscriptions/ec08f54a-0f1a-4c39-a964-cc5f288924e4/resourceGroups/rg-uksouth-chaos-demo-01/providers/Microsoft.Compute/virtualMachines/vm-uks-b-0]
azurerm_key_vault_access_policy.kv1_vmsb_access: Refreshing state... [id=/subscriptions/ec08f54a-0f1a-4c39-a964-cc5f288924e4/resourceGroups/rg-uksouth-chaos-demo-01/providers/Microsoft.KeyVault/vaults/keyvaultb422b3ea7d/objectId/840ab3cb-1cfb-4c36-8c65-21ab79fcb599]
azurerm_windows_virtual_machine.uks-vmsa[0]: Refreshing state... [id=/subscriptions/ec08f54a-0f1a-4c39-a964-cc5f288924e4/resourceGroups/rg-uksouth-chaos-demo-01/providers/Microsoft.Compute/virtualMachines/vm-uks-a-0]
azurerm_key_vault_access_policy.kv1_vmsa_access: Refreshing state... [id=/subscriptions/ec08f54a-0f1a-4c39-a964-cc5f288924e4/resourceGroups/rg-uksouth-chaos-demo-01/providers/Microsoft.KeyVault/vaults/keyvaultb422b3ea7d/objectId/1e928a57-1118-4817-ac66-d976f29db393]

Terraform used the selected providers to generate the following execution
plan. Resource actions are indicated with the following symbols:
  + create
  ~ update in-place

Terraform will perform the following actions:

  # azurerm_key_vault.kv1 will be updated in-place
  ~ resource "azurerm_key_vault" "kv1" {
      ~ access_policy                   = [
            # (1 unchanged element hidden)
            {
                application_id          = ""
                certificate_permissions = []
                key_permissions         = []
                object_id               = "b496e294-c87e-4627-a5d2-557fd9732bbe"
                secret_permissions      = [
                    "Get",
                    "List",
                ]
                storage_permissions     = []
                tenant_id               = "68a3be48-c55e-414c-b2bf-5cc4d2d81d74"
            },
          - {
              - application_id          = ""
              - certificate_permissions = []
              - key_permissions         = []
              - object_id               = "1e928a57-1118-4817-ac66-d976f29db393"
              - secret_permissions      = [
                  - "Get",
                  - "List",
                ]
              - storage_permissions     = []
              - tenant_id               = "68a3be48-c55e-414c-b2bf-5cc4d2d81d74"
            },
          - {
              - application_id          = ""
              - certificate_permissions = []
              - key_permissions         = []
              - object_id               = "840ab3cb-1cfb-4c36-8c65-21ab79fcb599"
              - secret_permissions      = [
                  - "Get",
                  - "List",
                ]
              - storage_permissions     = []
              - tenant_id               = "68a3be48-c55e-414c-b2bf-5cc4d2d81d74"
            },
        ]
        id                              = "/subscriptions/ec08f54a-0f1a-4c39-a964-cc5f288924e4/resourceGroups/rg-uksouth-chaos-demo-01/providers/Microsoft.KeyVault/vaults/keyvaultb422b3ea7d"
        name                            = "keyvaultb422b3ea7d"
        tags                            = {
            "Environment" = "ChaosStudioDemo"
            "Owner"       = "dacat"
        }
        # (12 unchanged attributes hidden)

        # (1 unchanged block hidden)
    }

  # azurerm_key_vault_secret.vmpassword1 will be updated in-place
  ~ resource "azurerm_key_vault_secret" "vmpassword1" {
      ~ expiration_date         = "2024-09-06T09:09:20Z" -> (known after apply)
        id                      = "https://keyvaultb422b3ea7d.vault.azure.net/secrets/vmpassword1/51c714eb3c0b4ce39e6f69451a4f9077"
        name                    = "vmpassword1"
        tags                    = {}
        # (7 unchanged attributes hidden)
    }

  # azurerm_key_vault_secret.vmpassword2 will be updated in-place
  ~ resource "azurerm_key_vault_secret" "vmpassword2" {
      ~ expiration_date         = "2024-09-06T09:09:20Z" -> (known after apply)
        id                      = "https://keyvaultb422b3ea7d.vault.azure.net/secrets/vmpassword2/a2d68b023f5744df8e0811d3fedfc24d"
        name                    = "vmpassword2"
        tags                    = {}
        # (7 unchanged attributes hidden)
    }

  # azurerm_windows_virtual_machine.uks-vmsa[0] will be updated in-place
  ~ resource "azurerm_windows_virtual_machine" "uks-vmsa" {
        id                                                     = "/subscriptions/ec08f54a-0f1a-4c39-a964-cc5f288924e4/resourceGroups/rg-uksouth-chaos-demo-01/providers/Microsoft.Compute/virtualMachines/vm-uks-a-0"
        name                                                   = "vm-uks-a-0"
        tags                                                   = {
            "Environment" = "ChaosStudioDemo"
            "Health"      = "Active"
            "Owner"       = "dacat"
        }
        # (27 unchanged attributes hidden)

      ~ identity {
          ~ identity_ids = [
              - "/subscriptions/ec08f54a-0f1a-4c39-a964-cc5f288924e4/resourceGroups/op9-uks-monitoring-001/providers/Microsoft.ManagedIdentity/userAssignedIdentities/op9-uks-id-usr-vm-001",
            ]
          ~ type         = "SystemAssigned, UserAssigned" -> "SystemAssigned"
            # (2 unchanged attributes hidden)
        }

        # (3 unchanged blocks hidden)
    }

  # azurerm_windows_virtual_machine.uks-vmsb[0] will be updated in-place
  ~ resource "azurerm_windows_virtual_machine" "uks-vmsb" {
        id                                                     = "/subscriptions/ec08f54a-0f1a-4c39-a964-cc5f288924e4/resourceGroups/rg-uksouth-chaos-demo-01/providers/Microsoft.Compute/virtualMachines/vm-uks-b-0"
        name                                                   = "vm-uks-b-0"
        tags                                                   = {
            "Environment" = "ChaosStudioDemo"
            "Health"      = "Active"
            "Owner"       = "dacat"
        }
        # (27 unchanged attributes hidden)

      ~ identity {
          ~ identity_ids = [
              - "/subscriptions/ec08f54a-0f1a-4c39-a964-cc5f288924e4/resourceGroups/op9-uks-monitoring-001/providers/Microsoft.ManagedIdentity/userAssignedIdentities/op9-uks-id-usr-vm-001",
            ]
          ~ type         = "SystemAssigned, UserAssigned" -> "SystemAssigned"
            # (2 unchanged attributes hidden)
        }

        # (3 unchanged blocks hidden)
    }

  # azurerm_windows_virtual_machine_scale_set.uks-vmssa[0] will be created
  + resource "azurerm_windows_virtual_machine_scale_set" "uks-vmssa" {
      + admin_password                                    = (sensitive value)
      + admin_username                                    = "azureadmin"
      + computer_name_prefix                              = (known after apply)
      + do_not_run_extensions_on_overprovisioned_machines = false
      + enable_automatic_updates                          = true
      + extension_operations_enabled                      = (known after apply)
      + extensions_time_budget                            = "PT1H30M"
      + id                                                = (known after apply)
      + instances                                         = 5
      + location                                          = "uksouth"
      + max_bid_price                                     = -1
      + name                                              = "uks-0"
      + overprovision                                     = true
      + platform_fault_domain_count                       = (known after apply)
      + priority                                          = "Regular"
      + provision_vm_agent                                = true
      + resource_group_name                               = "rg-uksouth-chaos-demo-01"
      + scale_in_policy                                   = (known after apply)
      + single_placement_group                            = true
      + sku                                               = "Standard_D2s_v4"
      + tags                                              = {
          + "Environment" = "ChaosStudioDemo"
          + "Health"      = "Active"
          + "Owner"       = "dacat"
        }
      + unique_id                                         = (known after apply)
      + upgrade_mode                                      = "Automatic"
      + zone_balance                                      = false

      + boot_diagnostics {
          + storage_account_uri = "https://sauksouthvmdiag.blob.core.windows.net/"
        }

      + identity {
          + principal_id = (known after apply)
          + tenant_id    = (known after apply)
          + type         = "SystemAssigned"
        }

      + network_interface {
          + enable_accelerated_networking = false
          + enable_ip_forwarding          = false
          + name                          = "win-vmss-nic-rY4"
          + primary                       = true

          + ip_configuration {
              + name      = "internal"
              + primary   = true
              + subnet_id = "/subscriptions/ec08f54a-0f1a-4c39-a964-cc5f288924e4/resourceGroups/rg-uksouth-chaos-demo-01/providers/Microsoft.Network/virtualNetworks/vnet-uksouth-hub-01/subnets/snethost-uksouth-vnet-hub-01"
              + version   = "IPv4"
            }
        }

      + os_disk {
          + caching                   = "ReadWrite"
          + disk_size_gb              = (known after apply)
          + storage_account_type      = "StandardSSD_LRS"
          + write_accelerator_enabled = false
        }

      + source_image_reference {
          + offer     = "WindowsServer"
          + publisher = "MicrosoftWindowsServer"
          + sku       = "2022-Datacenter"
          + version   = "latest"
        }
    }

  # azurerm_windows_virtual_machine_scale_set.uks-vmssa[1] will be created
  + resource "azurerm_windows_virtual_machine_scale_set" "uks-vmssa" {
      + admin_password                                    = (sensitive value)
      + admin_username                                    = "azureadmin"
      + computer_name_prefix                              = (known after apply)
      + do_not_run_extensions_on_overprovisioned_machines = false
      + enable_automatic_updates                          = true
      + extension_operations_enabled                      = (known after apply)
      + extensions_time_budget                            = "PT1H30M"
      + id                                                = (known after apply)
      + instances                                         = 5
      + location                                          = "uksouth"
      + max_bid_price                                     = -1
      + name                                              = "uks-1"
      + overprovision                                     = true
      + platform_fault_domain_count                       = (known after apply)
      + priority                                          = "Regular"
      + provision_vm_agent                                = true
      + resource_group_name                               = "rg-uksouth-chaos-demo-01"
      + scale_in_policy                                   = (known after apply)
      + single_placement_group                            = true
      + sku                                               = "Standard_D2s_v4"
      + tags                                              = {
          + "Environment" = "ChaosStudioDemo"
          + "Health"      = "Active"
          + "Owner"       = "dacat"
        }
      + unique_id                                         = (known after apply)
      + upgrade_mode                                      = "Automatic"
      + zone_balance                                      = false

      + boot_diagnostics {
          + storage_account_uri = "https://sauksouthvmdiag.blob.core.windows.net/"
        }

      + identity {
          + principal_id = (known after apply)
          + tenant_id    = (known after apply)
          + type         = "SystemAssigned"
        }

      + network_interface {
          + enable_accelerated_networking = false
          + enable_ip_forwarding          = false
          + name                          = "win-vmss-nic-rY4"
          + primary                       = true

          + ip_configuration {
              + name      = "internal"
              + primary   = true
              + subnet_id = "/subscriptions/ec08f54a-0f1a-4c39-a964-cc5f288924e4/resourceGroups/rg-uksouth-chaos-demo-01/providers/Microsoft.Network/virtualNetworks/vnet-uksouth-hub-01/subnets/snethost-uksouth-vnet-hub-01"
              + version   = "IPv4"
            }
        }

      + os_disk {
          + caching                   = "ReadWrite"
          + disk_size_gb              = (known after apply)
          + storage_account_type      = "StandardSSD_LRS"
          + write_accelerator_enabled = false
        }

      + source_image_reference {
          + offer     = "WindowsServer"
          + publisher = "MicrosoftWindowsServer"
          + sku       = "2022-Datacenter"
          + version   = "latest"
        }
    }

Plan: 2 to add, 5 to change, 0 to destroy.
azurerm_key_vault.kv1: Modifying... [id=/subscriptions/ec08f54a-0f1a-4c39-a964-cc5f288924e4/resourceGroups/rg-uksouth-chaos-demo-01/providers/Microsoft.KeyVault/vaults/keyvaultb422b3ea7d]
azurerm_key_vault.kv1: Modifications complete after 2s [id=/subscriptions/ec08f54a-0f1a-4c39-a964-cc5f288924e4/resourceGroups/rg-uksouth-chaos-demo-01/providers/Microsoft.KeyVault/vaults/keyvaultb422b3ea7d]
azurerm_key_vault_secret.vmpassword2: Modifying... [id=https://keyvaultb422b3ea7d.vault.azure.net/secrets/vmpassword2/a2d68b023f5744df8e0811d3fedfc24d]
azurerm_key_vault_secret.vmpassword1: Modifying... [id=https://keyvaultb422b3ea7d.vault.azure.net/secrets/vmpassword1/51c714eb3c0b4ce39e6f69451a4f9077]
azurerm_key_vault_secret.vmpassword2: Modifications complete after 5s [id=https://keyvaultb422b3ea7d.vault.azure.net/secrets/vmpassword2/a2d68b023f5744df8e0811d3fedfc24d]
azurerm_windows_virtual_machine.uks-vmsb[0]: Modifying... [id=/subscriptions/ec08f54a-0f1a-4c39-a964-cc5f288924e4/resourceGroups/rg-uksouth-chaos-demo-01/providers/Microsoft.Compute/virtualMachines/vm-uks-b-0]
azurerm_key_vault_secret.vmpassword1: Modifications complete after 5s [id=https://keyvaultb422b3ea7d.vault.azure.net/secrets/vmpassword1/51c714eb3c0b4ce39e6f69451a4f9077]
azurerm_windows_virtual_machine_scale_set.uks-vmssa[0]: Creating...
azurerm_windows_virtual_machine_scale_set.uks-vmssa[1]: Creating...
azurerm_windows_virtual_machine.uks-vmsa[0]: Modifying... [id=/subscriptions/ec08f54a-0f1a-4c39-a964-cc5f288924e4/resourceGroups/rg-uksouth-chaos-demo-01/providers/Microsoft.Compute/virtualMachines/vm-uks-a-0]
azurerm_windows_virtual_machine.uks-vmsb[0]: Still modifying... [id=/subscriptions/ec08f54a-0f1a-4c39-a964-...oft.Compute/virtualMachines/vm-uks-b-0, 10s elapsed]
azurerm_windows_virtual_machine_scale_set.uks-vmssa[0]: Still creating... [10s elapsed]
azurerm_windows_virtual_machine_scale_set.uks-vmssa[1]: Still creating... [10s elapsed]
azurerm_windows_virtual_machine.uks-vmsa[0]: Still modifying... [id=/subscriptions/ec08f54a-0f1a-4c39-a964-...oft.Compute/virtualMachines/vm-uks-a-0, 10s elapsed]
azurerm_windows_virtual_machine.uks-vmsb[0]: Modifications complete after 12s [id=/subscriptions/ec08f54a-0f1a-4c39-a964-cc5f288924e4/resourceGroups/rg-uksouth-chaos-demo-01/providers/Microsoft.Compute/virtualMachines/vm-uks-b-0]
azurerm_windows_virtual_machine.uks-vmsa[0]: Modifications complete after 13s [id=/subscriptions/ec08f54a-0f1a-4c39-a964-cc5f288924e4/resourceGroups/rg-uksouth-chaos-demo-01/providers/Microsoft.Compute/virtualMachines/vm-uks-a-0]
azurerm_windows_virtual_machine_scale_set.uks-vmssa[0]: Still creating... [21s elapsed]
azurerm_windows_virtual_machine_scale_set.uks-vmssa[1]: Still creating... [21s elapsed]
azurerm_windows_virtual_machine_scale_set.uks-vmssa[0]: Still creating... [31s elapsed]
azurerm_windows_virtual_machine_scale_set.uks-vmssa[1]: Still creating... [31s elapsed]
azurerm_windows_virtual_machine_scale_set.uks-vmssa[1]: Still creating... [41s elapsed]
azurerm_windows_virtual_machine_scale_set.uks-vmssa[0]: Still creating... [41s elapsed]
azurerm_windows_virtual_machine_scale_set.uks-vmssa[1]: Still creating... [51s elapsed]
azurerm_windows_virtual_machine_scale_set.uks-vmssa[0]: Still creating... [51s elapsed]
azurerm_windows_virtual_machine_scale_set.uks-vmssa[0]: Still creating... [1m1s elapsed]
azurerm_windows_virtual_machine_scale_set.uks-vmssa[1]: Still creating... [1m1s elapsed]
azurerm_windows_virtual_machine_scale_set.uks-vmssa[1]: Still creating... [1m11s elapsed]
azurerm_windows_virtual_machine_scale_set.uks-vmssa[0]: Still creating... [1m11s elapsed]
azurerm_windows_virtual_machine_scale_set.uks-vmssa[0]: Still creating... [1m21s elapsed]
azurerm_windows_virtual_machine_scale_set.uks-vmssa[1]: Still creating... [1m21s elapsed]
azurerm_windows_virtual_machine_scale_set.uks-vmssa[1]: Still creating... [1m31s elapsed]
azurerm_windows_virtual_machine_scale_set.uks-vmssa[0]: Still creating... [1m31s elapsed]
azurerm_windows_virtual_machine_scale_set.uks-vmssa[0]: Still creating... [1m41s elapsed]
azurerm_windows_virtual_machine_scale_set.uks-vmssa[1]: Still creating... [1m41s elapsed]
azurerm_windows_virtual_machine_scale_set.uks-vmssa[1]: Creation complete after 1m49s [id=/subscriptions/ec08f54a-0f1a-4c39-a964-cc5f288924e4/resourceGroups/rg-uksouth-chaos-demo-01/providers/Microsoft.Compute/virtualMachineScaleSets/uks-1]
azurerm_windows_virtual_machine_scale_set.uks-vmssa[0]: Creation complete after 1m50s [id=/subscriptions/ec08f54a-0f1a-4c39-a964-cc5f288924e4/resourceGroups/rg-uksouth-chaos-demo-01/providers/Microsoft.Compute/virtualMachineScaleSets/uks-0]

Apply complete! Resources: 2 added, 5 changed, 0 destroyed.

Outputs:

_1_Access-URL-via-TrafficManager = "Use this URL to access via Traffic Manager: http://chaos-demo-c80375b6.trafficmanager.net "
_2_Access-URL-via-uks-Firewall = "Use this URL to access directly to the uksouth Firewall: http://pip-uks-c80375b6.uksouth.cloudapp.azure.com "
